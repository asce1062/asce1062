---
import Layout from "@/layouts/Layout.astro";
import Columns from "@/components/ui/Columns.astro";
import Card from "@/components/ProjectCard.astro";
import GitHubContributions from "@/components/GitHubContributions.astro";
import { getFeaturedProjects } from "@/lib/api/github";

const projectBlacklist = ["fundAI", "findme", "d-v-nsm-nt-a-tp-t-"];

const projects = await getFeaturedProjects("asce1062", import.meta.env.GITHUB_PAT, {
	blacklist: projectBlacklist,
	sortBy: "recent",
	includeLanguages: true,
	excludeForks: false,
});
---

<Layout
	title="Projects"
	ogImage="social-preview.png"
	description="Personal projects and contributions to open source codebases">
	<h2>my projects</h2>
	<ul class="mb-6">
		<li>Projects sorted by most recently pushed to repository.</li>
		<li>Updated when I ship an update.</li>
	</ul>
	<Columns columns={2}>
		{
			projects.map((project: any) => (
				<Card
					name={project.name}
					url={project.homepage || project.html_url}
					repo={project.html_url}
					description={project.description}
					tools={project.languages?.map((lang: string) => ({ name: lang, icon: "" })) || []}
					stars={project.stargazers_count}
					forks={project.forks_count}
					issues={project.open_issues_count}
					contributors={project.contributors_count}
					imagePath={"/src/assets/projects/" + project.name.toLowerCase()}
				/>
			))
		}
	</Columns>
	<p>
		you may also wish to view my occasional contributions to
		<a
			href="https://github.com/pulls?q=is%3Apr+author%3Aasce1062+archived%3Afalse+"
			target="_blank"
			rel="noopener noreferrer">
			other open-source repositories
		</a> (might need a GitHub account to view).
	</p>
	<br />
	<GitHubContributions username="asce1062" />
</Layout>
