---
import type { GuestEntry } from "@/lib/api/guestbook";
import { getInitials, formatEntryDate } from "@/lib/api/guestbook";

interface Props {
	entry: GuestEntry;
}

const { entry } = Astro.props;
const initials = getInitials(entry.name);
const formattedDate = formatEntryDate(entry.timestamp);
---

<article class="entry">
	<div class="entry-avatar">{initials}</div>
	<div class="entry-bubble">
		<div class="entry-header">
			<h2>
				{
					entry.url ? (
						<a href={entry.url} target="_blank" rel="noopener noreferrer">
							{entry.name}
						</a>
					) : (
						entry.name
					)
				}
			</h2>
			<time datetime={entry.timestamp.toISOString()}>{formattedDate}</time>
		</div>
		<pre class="entry-message">{entry.message}</pre>
	</div>
</article>
