import{c as E,i as $}from"./shareManager.CWvGNRdp.js";function P(){return Math.floor(Math.random()*9e5+1e5)}function N(t="counter"){const r=document.getElementById(t);r&&(r.textContent=P().toString())}const O={bg:"none",borderColor:"base-300",borderWidth:"1px",borderStyle:"solid",borderRadius:"0.25rem"};function M(){const t=document.getElementById("style-input"),r=document.getElementById("customizer-panel"),a=document.getElementById("customizer-done"),d=document.getElementById("customizer-random"),c=document.getElementById("pattern-select"),v=document.getElementById("pattern-swatch"),s=document.getElementById("textarea-wrapper"),u=document.getElementById("border-width-slider"),m=document.getElementById("border-width-label"),b=["0.5px","1px","1.5px","2px","2.5px","3px","3.5px","4px"];if(!t||!r)return;const f=r.querySelector(".expand-body");if(!f)return;function g(){f.hidden=!0}a?.addEventListener("click",()=>g()),document.addEventListener("click",e=>{const n=e.target;!f.hidden&&!r.contains(n)&&!d?.contains(n)&&g()});function l(e){return e[Math.floor(Math.random()*e.length)]}const o={...O};function w(){t&&(t.value=JSON.stringify(o))}function L(e,n){n==="none"?e.style.setProperty("--pattern-url","none"):e.style.setProperty("--pattern-url",`url(/notecards/${n}.svg)`)}function k(){v&&L(v,o.bg)}function A(){s&&(L(s,o.bg),s.style.borderColor=`var(--color-${o.borderColor})`,s.style.borderWidth=o.borderWidth,s.style.borderStyle=o.borderStyle,s.style.borderRadius=o.borderRadius)}function I(){const e=b.indexOf(o.borderWidth);if(e!==-1&&(u&&(u.value=String(e)),m)){m.textContent=o.borderWidth;const n=e/7;m.style.left=`calc(${n*100}% + ${(.5-n)*1.25}rem)`}}function i(){k(),I(),A(),w()}c?.addEventListener("change",()=>{o.bg=c.value,i()});function h(e,n){s&&s.style.setProperty(e,n)}function p(){A()}document.querySelectorAll("[data-radius]").forEach(e=>{e.addEventListener("click",()=>{o.borderRadius=e.dataset.radius,document.querySelectorAll("[data-radius]").forEach(n=>n.classList.remove("selected")),e.classList.add("selected"),i()}),e.addEventListener("mouseenter",()=>h("border-radius",e.dataset.radius)),e.addEventListener("mouseleave",p)}),u?.addEventListener("input",()=>{const e=parseInt(u.value,10);o.borderWidth=b[e],i()}),document.querySelectorAll("[data-border-color]").forEach(e=>{e.addEventListener("click",()=>{o.borderColor=e.dataset.borderColor,document.querySelectorAll("[data-border-color]").forEach(n=>n.classList.remove("selected")),e.classList.add("selected"),i()}),e.addEventListener("mouseenter",()=>h("border-color",`var(--color-${e.dataset.borderColor})`)),e.addEventListener("mouseleave",p)}),document.querySelectorAll("[data-border-style]").forEach(e=>{e.addEventListener("click",()=>{o.borderStyle=e.dataset.borderStyle,document.querySelectorAll("[data-border-style]").forEach(n=>n.classList.remove("selected")),e.classList.add("selected"),o.borderStyle==="double"&&parseFloat(o.borderWidth)<3&&(o.borderWidth="3px"),i()}),e.addEventListener("mouseenter",()=>h("border-style",e.dataset.borderStyle)),e.addEventListener("mouseleave",p)});function x(){c&&(c.value=o.bg),document.querySelectorAll("[data-radius]").forEach(e=>e.classList.remove("selected")),document.querySelector(`[data-radius="${o.borderRadius}"]`)?.classList.add("selected"),document.querySelectorAll("[data-border-color]").forEach(e=>e.classList.remove("selected")),document.querySelector(`[data-border-color="${o.borderColor}"]`)?.classList.add("selected"),document.querySelectorAll("[data-border-style]").forEach(e=>e.classList.remove("selected")),document.querySelector(`[data-border-style="${o.borderStyle}"]`)?.classList.add("selected")}const q=Array.from(c?.options??[]).map(e=>e.value),C=Array.from(document.querySelectorAll("[data-border-color]")).map(e=>e.dataset.borderColor),W=Array.from(document.querySelectorAll("[data-radius]")).map(e=>e.dataset.radius),B=Array.from(document.querySelectorAll("[data-border-style]")).map(e=>e.dataset.borderStyle);d?.addEventListener("click",()=>{o.bg=l(q),o.borderColor=l(C),o.borderRadius=l(W),o.borderStyle=l(B),o.borderWidth=l(b),o.borderStyle==="double"&&parseFloat(o.borderWidth)<3&&(o.borderWidth="3px"),x(),i()}),x(),i()}const S="entry-action-notification";function y(){document.querySelectorAll(".entry-actions-trigger[aria-expanded='true']").forEach(t=>{t.setAttribute("aria-expanded","false");const r=t.nextElementSibling;r&&(r.hidden=!0)})}function R(t){const r=t.getAttribute("aria-expanded")==="true";if(y(),!r){t.setAttribute("aria-expanded","true");const a=t.nextElementSibling;a&&(a.hidden=!1)}}async function z(t){const r=t.dataset.style||"";let a;const d={bg:"topography",borderColor:"base-300",borderWidth:"1px",borderStyle:"solid",borderRadius:"0.25rem"};try{a=r?{...d,...JSON.parse(r)}:d}catch{a=d}await E(JSON.stringify(a,null,2),S)}async function G(t){const r=t.dataset.message||"";await E(r,S)}async function T(t){const r=t.dataset.entryId,a=t.dataset.entryName||"someone",d=`https://alexmbugua.me/guestbook#entry-${r}`;if(navigator.share)try{await navigator.share({title:`Guestbook entry by ${a}`,url:d});return}catch(c){if(c.name==="AbortError")return}await E(d,S)}async function F(t){const r=t.dataset.action;if(r)switch(y(),r){case"copy-style":await z(t);break;case"copy-message":await G(t);break;case"share-entry":await T(t);break}}function J(){const t=window.location.hash;if(!t.startsWith("#entry-"))return;const r=document.querySelector(t);r&&(r.scrollIntoView({behavior:"smooth",block:"center"}),r.classList.add("entry--highlighted"),r.addEventListener("animationend",()=>{r.classList.remove("entry--highlighted")},{once:!0}))}function U(){document.querySelectorAll(".entry-actions-trigger").forEach(t=>{t.addEventListener("click",r=>{r.stopPropagation(),R(t)})}),document.querySelectorAll(".entry-action[data-action]").forEach(t=>{t.addEventListener("click",r=>{r.stopPropagation(),F(t)})}),document.addEventListener("click",()=>{y()}),document.addEventListener("keydown",t=>{t.key==="Escape"&&y()}),J()}function V(){N(),M(),U(),document.getElementById("entry-action-notification")&&$("entry-action-notification")}document.addEventListener("astro:page-load",V);
